<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EOS.IO: identity::contract Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="eos-logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">EOS.IO
   &#160;<span id="projectnumber">DAWN 4.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceidentity.html">identity</a></li><li class="navelem"><a class="el" href="classidentity_1_1contract.html">contract</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classidentity_1_1contract-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">identity::contract Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for identity::contract:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classidentity_1_1contract.png" usemap="#identity::contract_map" alt=""/>
  <map id="identity::contract_map" name="identity::contract_map">
<area href="classidentity_1_1identity__base.html" alt="identity::identity_base" shape="rect" coords="0,0,132,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a6e75dbb5fa7d1d47b2b838cfdb16a102"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classidentity_1_1contract.html#a6e75dbb5fa7d1d47b2b838cfdb16a102">settrust</a> (const <a class="el" href="group__types.html#ga3b44deb4b3b8d6ebab339d1263692117">account_name</a> trustor, const <a class="el" href="group__types.html#ga3b44deb4b3b8d6ebab339d1263692117">account_name</a> trusting, const <a class="el" href="musl_2upstream_2include_2bits_2stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> trust=0)</td></tr>
<tr class="memdesc:a6e75dbb5fa7d1d47b2b838cfdb16a102"><td class="mdescLeft">&#160;</td><td class="mdescRight">0 to remove, -1 to mark untrusted, 1 to mark trusted  <a href="#a6e75dbb5fa7d1d47b2b838cfdb16a102">More...</a><br /></td></tr>
<tr class="separator:a6e75dbb5fa7d1d47b2b838cfdb16a102"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4fb9e7bf27146c319004935473b40d5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classidentity_1_1contract.html#ab4fb9e7bf27146c319004935473b40d5">create</a> (const <a class="el" href="group__types.html#ga3b44deb4b3b8d6ebab339d1263692117">account_name</a> creator, const <a class="el" href="musl_2upstream_2include_2bits_2stdint_8h.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> <a class="el" href="structidentity.html">identity</a>)</td></tr>
<tr class="separator:ab4fb9e7bf27146c319004935473b40d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a285e3f565a444b022f9690960aa2b40f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classidentity_1_1contract.html#a285e3f565a444b022f9690960aa2b40f">certprop</a> (const <a class="el" href="group__types.html#ga3b44deb4b3b8d6ebab339d1263692117">account_name</a> bill_storage_to, const <a class="el" href="group__types.html#ga3b44deb4b3b8d6ebab339d1263692117">account_name</a> certifier, const <a class="el" href="structidentity.html#ac1bf721a18343314438ca1994fa09064">identity_name</a> <a class="el" href="structidentity.html">identity</a>, const <a class="el" href="classstd_1_1vector.html">vector</a>&lt; <a class="el" href="structidentity_1_1certvalue.html">certvalue</a> &gt; &amp;values)</td></tr>
<tr class="separator:a285e3f565a444b022f9690960aa2b40f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classidentity_1_1identity__base"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classidentity_1_1identity__base')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classidentity_1_1identity__base.html">identity::identity_base</a></td></tr>
<tr class="memitem:a3ac77700ec3bdbf0ccef9a8e55e90e13 inherit pub_methods_classidentity_1_1identity__base"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classidentity_1_1identity__base.html#a3ac77700ec3bdbf0ccef9a8e55e90e13">identity_base</a> (<a class="el" href="group__types.html#ga3b44deb4b3b8d6ebab339d1263692117">account_name</a> acnt)</td></tr>
<tr class="separator:a3ac77700ec3bdbf0ccef9a8e55e90e13 inherit pub_methods_classidentity_1_1identity__base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4557eadd5884746712e07e50193a1c23 inherit pub_methods_classidentity_1_1identity__base"><td class="memItemLeft" align="right" valign="top"><a class="el" href="musl_2upstream_2include_2stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classidentity_1_1identity__base.html#a4557eadd5884746712e07e50193a1c23">is_trusted_by</a> (<a class="el" href="group__types.html#ga3b44deb4b3b8d6ebab339d1263692117">account_name</a> trusted, <a class="el" href="group__types.html#ga3b44deb4b3b8d6ebab339d1263692117">account_name</a> by)</td></tr>
<tr class="separator:a4557eadd5884746712e07e50193a1c23 inherit pub_methods_classidentity_1_1identity__base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add54887d60e5e480d5d854950ec25667 inherit pub_methods_classidentity_1_1identity__base"><td class="memItemLeft" align="right" valign="top"><a class="el" href="musl_2upstream_2include_2stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classidentity_1_1identity__base.html#add54887d60e5e480d5d854950ec25667">is_trusted</a> (<a class="el" href="group__types.html#ga3b44deb4b3b8d6ebab339d1263692117">account_name</a> acnt)</td></tr>
<tr class="separator:add54887d60e5e480d5d854950ec25667 inherit pub_methods_classidentity_1_1identity__base"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_attribs_classidentity_1_1identity__base"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classidentity_1_1identity__base')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classidentity_1_1identity__base.html">identity::identity_base</a></td></tr>
<tr class="memitem:a0a4724fd162ea91cb8b13bea2adf2913 inherit pro_attribs_classidentity_1_1identity__base"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__types.html#ga3b44deb4b3b8d6ebab339d1263692117">account_name</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classidentity_1_1identity__base.html#a0a4724fd162ea91cb8b13bea2adf2913">_self</a></td></tr>
<tr class="separator:a0a4724fd162ea91cb8b13bea2adf2913 inherit pro_attribs_classidentity_1_1identity__base"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This contract maintains a graph database of certified statements about an identity. An identity is separated from the concept of an account because the mapping of identity to accounts is subject to community consensus.</p>
<p>Some use cases need a global source of trust, this trust rooted in the voter who selects block producers. <a class="el" href="struct_a.html">A</a> block producer's opinion is "trusted" and so is the opinion of anyone the block producer marks as "trusted".</p>
<p>When a block producer is voted out the implicit trust in every certification they made or those they trusted made is removed. All users are liable for making false certifications.</p>
<p>An account needs to claim the identity and a trusted account must certify the claim.</p>
<p>Data for an identity is stored:</p>
<p>DeployToAccount / identity / certs / [property, trusted, certifier] =&gt; value</p>
<p>Questions database is designed to answer:</p>
<ol type="1">
<li>has $identity.$unique been certified a "trusted" certifier</li>
<li>has $identity.$property been certified by $account</li>
<li>has $identity.$trusted been certified by a "trusted" certifier</li>
<li>what account has authority to speak on behalf of identity?<ul>
<li>for each trusted owner certification check to see if the account has claimed it</li>
</ul>
</li>
<li>what identity does account have authority to speak on behalf?<ul>
<li>check what identity the account has self certified owner</li>
<li>verify that a trusted certifier has confirmed owner</li>
</ul>
</li>
</ol>
<p>This database structure enables parallel opeartions on independent identities.</p>
<p>When an account certs a property we check to see if that </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a285e3f565a444b022f9690960aa2b40f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a285e3f565a444b022f9690960aa2b40f">&#9670;&nbsp;</a></span>certprop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void identity::contract::certprop </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__types.html#ga3b44deb4b3b8d6ebab339d1263692117">account_name</a>&#160;</td>
          <td class="paramname"><em>bill_storage_to</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__types.html#ga3b44deb4b3b8d6ebab339d1263692117">account_name</a>&#160;</td>
          <td class="paramname"><em>certifier</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structidentity.html#ac1bf721a18343314438ca1994fa09064">identity_name</a>&#160;</td>
          <td class="paramname"><em>identity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classstd_1_1vector.html">vector</a>&lt; <a class="el" href="structidentity_1_1certvalue.html">certvalue</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>values</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>the table exists in the scope of the identity </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bill_storage_to</td><td>account which is paying for storage </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab4fb9e7bf27146c319004935473b40d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4fb9e7bf27146c319004935473b40d5">&#9670;&nbsp;</a></span>create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void identity::contract::create </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__types.html#ga3b44deb4b3b8d6ebab339d1263692117">account_name</a>&#160;</td>
          <td class="paramname"><em>creator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="musl_2upstream_2include_2bits_2stdint_8h.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a>&#160;</td>
          <td class="paramname"><em>identity</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This action create a new globally unique 64 bit identifier, to minimize collisions each account is automatically assigned a 32 bit identity prefix based upon hash(account_name) ^ hash(tapos).</p>
<p>With this method no two accounts are likely to be assigned the same 32 bit prefix consistantly due to the constantly changing tapos. This prevents abuse of 'creator' selection to generate intentional conflicts with other users.</p>
<p>The creator can determine the last 32 bits using an algorithm of their choice. We presume the creator's algorithm can avoid collisions with itself.</p>
<p>Even if two accounts get a collision in first 32 bits, a proper creator algorithm should generate randomness in last 32 bits that will minimize collisions. In event of collision transaction will fail and creator can try again.</p>
<p><a class="el" href="struct_a.html">A</a> 64 bit identity is used because the key is used frequently and it makes for more effecient tables/scopes/etc. </p>

</div>
</div>
<a id="a6e75dbb5fa7d1d47b2b838cfdb16a102"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e75dbb5fa7d1d47b2b838cfdb16a102">&#9670;&nbsp;</a></span>settrust()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void identity::contract::settrust </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__types.html#ga3b44deb4b3b8d6ebab339d1263692117">account_name</a>&#160;</td>
          <td class="paramname"><em>trustor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__types.html#ga3b44deb4b3b8d6ebab339d1263692117">account_name</a>&#160;</td>
          <td class="paramname"><em>trusting</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="musl_2upstream_2include_2bits_2stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td>
          <td class="paramname"><em>trust</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trustor</td><td>the account authorizing the trust </td></tr>
    <tr><td class="paramname">trusting</td><td>the account receiving the trust </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>contracts/identity/<a class="el" href="identity_8cpp.html">identity.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
