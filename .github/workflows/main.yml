name: Forked PR
on: [push]

jobs:
  amazonlinux-2:
    name: Build AmazonLinux-2
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v1
        with:
          submodules: recursive
      - name: Build
        run: | 
          git submodule update --init --recursive --force
          ./.cicd/build.sh
        env:
          IMAGE_TAG: amazon_linux-2-pinned
          PLATFORM_TYPE: pinned
  centos-77:
    name: Build Centos-7.7
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v1
        with:
          submodules: recursive
      - name: Build
        run: | 
          git submodule update --init --recursive --force
          ./.cicd/build.sh
        env:
          IMAGE_TAG: centos-7.7-pinned
          PLATFORM_TYPE: pinned
  ubuntu-1604:
    name: Build Ubuntu-16
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v1
        with:
          submodules: recursive
      - name: Build
        run: | 
          git submodule update --init --recursive --force
          ./.cicd/build.sh
        env:
          IMAGE_TAG: ubuntu-16.04-pinned
          PLATFORM_TYPE: pinned
  ubuntu-1804:
    name: Build Ubuntu-18
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v1
        with:
          submodules: recursive
      - name: Build
        run: | 
          git submodule update --init --recursive --force
          ./.cicd/build.sh
        env:
          IMAGE_TAG: ubuntu-18.04-pinned
          PLATFORM_TYPE: pinned
  macos-1015:
    name: Build MacOS-10.15
    runs-on: macos-latest
    steps:
      - uses: actions/checkout@v1
        with:
          submodules: recursive
      - name: Build
        run: | 
          git submodule update --init --recursive --force
          ./.cicd/platforms/unpinned/macos-10.14-unpinned.sh
          ./.cicd/build.sh
